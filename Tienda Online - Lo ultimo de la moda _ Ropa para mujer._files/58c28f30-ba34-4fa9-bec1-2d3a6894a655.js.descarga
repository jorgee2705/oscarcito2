/**handles:woocommerce-google-analytics-integration**/
(()=>{var r={d:(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},t={};r.r(t),r.d(t,{add_to_cart:()=>m,begin_checkout:()=>f,purchase:()=>b,remove_from_cart:()=>g,search:()=>y,select_content:()=>v,view_item:()=>h,view_item_list:()=>l});let c=window.wp.i18n,n=window.wp.hooks,o=(t,e)=>{var o,r={},o=(t.variation&&(r.item_variant=t.variation),{item_id:d(t),item_name:t.name,...s(t),quantity:null!=(o=t.quantity)?o:e,price:a(t.totals?.line_total||t.prices.price,t.prices.currency_minor_unit),...r});return t?.price_after_coupon_discount<t.prices.price&&(o.discount=a(t.prices.price-t.price_after_coupon_discount,t.prices.currency_minor_unit),o.price=a(t.price_after_coupon_discount,t.prices.currency_minor_unit)),o},i=(t,e)=>({item_id:d(t),item_name:t.name,item_list_name:e,...s(t),price:a(t.prices.price,t.prices.currency_minor_unit)}),a=(t,e=2)=>parseInt(t,10)/10**e,p=(t,e,o)=>{(0,n.removeAction)(t,e),(0,n.addAction)(t,e,o)},d=t=>{var e=t.extensions?.woocommerce_google_analytics_integration?.identifier;return void 0!==e?e:"product_sku"===window.ga4w?.settings?.identifier?t.sku||"#"+t.id:t.id},e=t=>t.coupons[0]?.code?{coupon:t.coupons[0]?.code}:{},s=t=>"categories"in t&&t.categories.length?u(t.categories):{},u=t=>Object.fromEntries(t.slice(0,5).map((t,e)=>[_(e),t.name])),_=t=>"item_category"+(0<t?t+1:""),w=(e,t,o)=>{var t;return null!=(t=t?.find(({id:t})=>t===e))?t:o?.items?.find(({id:t})=>t===e)},l=({products:t,listName:o=(0,c.__)("Product List","woocommerce-google-analytics-integration")})=>0!==t.length&&{item_list_id:"engagement",item_list_name:(0,c.__)("Viewing products","woocommerce-google-analytics-integration"),items:t.map((t,e)=>({...i(t,o),index:e+1}))},m=({product:t,quantity:e=1})=>({items:t?[o(t,e)]:[]}),g=({product:t,quantity:e=1})=>({items:t?[o(t,e)]:[]}),f=({storeCart:t})=>({currency:t.totals.currency_code,value:a(t.totals.total_price,t.totals.currency_minor_unit),...e(t),items:t.items.map(o)}),v=({product:t})=>!!t&&{content_type:"product",content_id:d(t)},y=({searchTerm:t})=>({search_term:t}),h=({product:t,listName:e=(0,c.__)("Product List","woocommerce-google-analytics-integration")})=>!!t&&{items:[i(t,e)]},b=({order:t})=>void 0!==t&&{transaction_id:t.id,affiliation:t.affiliation,currency:t.totals.currency_code,value:a(t.totals.total_price,t.totals.currency_minor_unit),tax:a(t.totals.tax_total,t.totals.currency_minor_unit),shipping:a(t.totals.shipping_total,t.totals.currency_minor_unit),items:t.items.map(o)},k="woocommerce-google-analytics",A="experimental__woocommerce_blocks",E=((0,n.removeAction)(A+"-checkout-submit",k),(0,n.removeAction)(A+"-checkout-set-email-address",k),(0,n.removeAction)(A+"-checkout-set-phone-number",k),(0,n.removeAction)(A+"-checkout-set-billing-address",k),(0,n.removeAction)(A+"-cart-set-item-quantity",k),(0,n.removeAction)(A+"-product-search",k),(0,n.removeAction)(A+"-store-notice-create",k),{statistics:["analytics_storage"],marketing:["ad_storage","ad_user_data","ad_personalization"]});function C(){var[{tracker_function_name:o}]=[window.ga4w.settings];if("function"==typeof wp_has_consent){void 0===window.wp_consent_type&&(window.wp_consent_type="optin");let r={};for(let[t,o]of Object.entries(E))if(""!==consent_api_get_cookie(window.consent_api.cookie_prefix+"_"+t)){let e=wp_has_consent(t)?"granted":"denied";o.forEach(t=>{r[t]=e})}0<Object.keys(r).length&&window[o]("consent","update",r)}[{tracker_function_name:c}]=[window.ga4w.settings],document.addEventListener("wp_listen_for_consent_change",t=>{let e={},o=E[Object.keys(t.detail)[0]],r="allow"===Object.values(t.detail)[0]?"granted":"denied";void 0!==o&&(o.forEach(t=>{e[t]=r}),0<Object.keys(e).length)&&window[c]("consent","update",e)});var c,o=([{events:r,tracker_function_name:n}]=[window.ga4w.settings],function(e){let o=t[e];if("function"!=typeof o)throw new Error(`Event ${e} is not supported.`);return function(t){var t=o(t);r.includes(e)&&t&&window[n]("event",e,t)}}),r,n,e;{var[i,{events:a,cart:d,products:s,product:u,added_to_cart:_,order:l}]=[o,window.ga4w.data];Object.values(null!=a?a:{}).forEach(t=>{"add_to_cart"===t?i(t)({product:_}):i(t)({storeCart:d,products:s,product:u,order:l})});let c=document.body.onadded_to_cart,t=(document.body.onadded_to_cart=function(t,e,o,r){"function"==typeof c&&c.apply(this,arguments);var r=parseInt(r?.[0]?.dataset.product_id||r?.[0]?.value);if(Number.isNaN(r))throw new Error("Google Analytics for WooCommerce: Could not read product ID from the button given in `added_to_cart` event. Check whether WooCommerce Core events or elements are malformed by other extensions.");var r=u?.id===r?u:w(r,s,d);r&&i("add_to_cart")({product:r})},()=>{document.querySelectorAll(".woocommerce-cart-form .woocommerce-cart-form__cart-item .remove[data-product_id]").forEach(t=>t.addEventListener("click",m))});function m(t){var t=parseInt(t.target?.dataset.product_id);if(Number.isNaN(t))throw new Error("Google Analytics for WooCommerce: Could not read product ID from the target element given to remove from cart event. Check whether WooCommerce Core events or elements are malformed by other extensions.");i("remove_from_cart")({product:w(t,s,d)})}t();let e=document.body.onupdated_wc_div,n=(document.body.onupdated_wc_div=function(){"function"==typeof e&&e.apply(this,arguments),t()},document.body.onremoved_from_cart);document.body.onremoved_from_cart=function(t,e,o,r){"function"==typeof n&&n.apply(this,arguments),m({target:r?.[0]})},document.querySelectorAll(".products .product:not(.wp-block-post)")?.forEach(t=>{let r=t.querySelector("a[data-product_id]")?.getAttribute("data-product_id");r&&t.addEventListener("click",t=>{var e=t.target.closest(".woocommerce-loop-product__link"),o=t.target.classList.contains("button")&&t.target.hasAttribute("data-product_id"),t=t.target.classList.contains("add_to_cart_button")&&!t.target.classList.contains("product_type_variable");(e||o&&!t)&&i("select_content")({product:w(parseInt(r),s,d)})})}),document.querySelectorAll(".products-block-post-template .product, .wc-block-product-template .product")?.forEach(t=>{let r=t.querySelector("[data-product_id]")?.getAttribute("data-product_id");r&&t.addEventListener("click",t=>{var t=t.target,e=t.closest(".wc-block-components-product-image a"),o=t.closest(".wp-block-post-title a"),t=t.closest(".wc-block-components-product-button [data-product_id]");t&&t.classList.contains("add_to_cart_button")&&!t.classList.contains("product_type_variable")?i("add_to_cart")({product:w(parseInt(r),s,d)}):(e||t||o)&&i("select_content")({product:w(parseInt(r),s,d)})})})}e=o,p(A+"-product-render",k,e("view_item")),p(A+"-cart-remove-item",k,e("remove_from_cart")),p(A+"-checkout-render-checkout-form",k,e("begin_checkout")),p(A+"-cart-add-item",k,({product:t})=>{e("add_to_cart")({product:t})}),p(A+"-product-list-render",k,e("view_item_list")),p(A+"-product-view-link",k,e("select_content"))}function L(){window.ga4w||console.warn("Google Analytics for WooCommerce: Configuration and tracking data not found after the page was fully loaded. Make sure the `woocommerce-google-analytics-integration-data` script gets eventually loaded.")}window.ga4w?C():(document.addEventListener("ga4w:ready",C),"complete"===document.readyState?L():window.addEventListener("load",L))})();